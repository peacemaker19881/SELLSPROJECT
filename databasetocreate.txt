
MariaDB [(none)]> USE SELLSDB;
Database changed
MariaDB [SELLSDB]> CREATE TABLE users (
    ->   id INT AUTO_INCREMENT PRIMARY KEY,
    ->   name VARCHAR(150) NOT NULL,
    ->   email VARCHAR(255) UNIQUE NOT NULL,
    ->   phone VARCHAR(32) UNIQUE,
    ->   password_hash VARCHAR(255) NOT NULL,
    ->   role ENUM('admin','seller','customer') NOT NULL DEFAULT 'customer',
    ->   mobile_money_account VARCHAR(100),
    ->   created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    ->   updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
    -> );
Query OK, 0 rows affected (0.353 sec)

MariaDB [SELLSDB]> CREATE TABLE products (
    ->   productid INT AUTO_INCREMENT PRIMARY KEY,
    ->   seller_id INT NOT NULL,
    ->   title VARCHAR(255) NOT NULL,
    ->   description TEXT,
    ->   price DECIMAL(12,2) NOT NULL,
    ->   quantity INT DEFAULT 1,
    ->   image_url VARCHAR(500),
    ->   approved BOOLEAN DEFAULT FALSE,
    ->   is_sold BOOLEAN DEFAULT FALSE,
    ->   created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    ->   FOREIGN KEY (seller_id) REFERENCES users(id)
    -> );
Query OK, 0 rows affected (0.275 sec)

MariaDB [SELLSDB]> CREATE TABLE product_out (
    ->   id INT AUTO_INCREMENT PRIMARY KEY,
    ->   productid INT NOT NULL,
    ->   buyer_id INT NOT NULL,
    ->   seller_id INT NOT NULL,
    ->   sale_price DECIMAL(12,2) NOT NULL,
    ->   commission_amount DECIMAL(12,2) NOT NULL,
    ->   seller_amount DECIMAL(12,2) NOT NULL,
    ->   mobile_money_txn_id VARCHAR(200),
    ->   created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    ->   FOREIGN KEY (productid) REFERENCES products(productid),
    ->   FOREIGN KEY (buyer_id) REFERENCES users(id),
    ->   FOREIGN KEY (seller_id) REFERENCES users(id)
    -> );
Query OK, 0 rows affected (0.436 sec)

MariaDB [SELLSDB]> CREATE TABLE transactions (
    ->   id INT AUTO_INCREMENT PRIMARY KEY,
    ->   user_id INT,
    ->   type ENUM('payment','payout','commission') NOT NULL,
    ->   amount DECIMAL(12,2) NOT NULL,
    ->   currency VARCHAR(10) DEFAULT 'RWF',
    ->   status ENUM('pending','success','failed') DEFAULT 'pending',
    ->   provider_txn_id VARCHAR(255),
    ->   metadata JSON,
    ->   created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    ->   FOREIGN KEY (user_id) REFERENCES users(id)
    -> );
Query OK, 0 rows affected (2.426 sec)

MariaDB [SELLSDB]> SHOW TABLES;
+-------------------+
| Tables_in_sellsdb |
+-------------------+
| product_out       |
| products          |
| transactions      |
| users             |
+-------------------+
4 rows in set (0.003 sec)

MariaDB [SELLSDB]>